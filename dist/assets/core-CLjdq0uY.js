function t(s,e,i,n){if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(s):n?n.value:e.get(s)}function l(s,e,i,n,_){if(typeof e=="function"?s!==e||!0:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(s,i),i}var a,r,c,h,u;const d="__TAURI_TO_IPC_KEY__";function p(s,e=!1){return window.__TAURI_INTERNALS__.transformCallback(s,e)}class g{constructor(e){a.set(this,void 0),r.set(this,0),c.set(this,[]),h.set(this,void 0),l(this,a,e||(()=>{})),this.id=p(i=>{const n=i.index;if("end"in i){n==t(this,r,"f")?this.cleanupCallback():l(this,h,n);return}const _=i.message;if(n==t(this,r,"f")){for(t(this,a,"f").call(this,_),l(this,r,t(this,r,"f")+1);t(this,r,"f")in t(this,c,"f");){const w=t(this,c,"f")[t(this,r,"f")];t(this,a,"f").call(this,w),delete t(this,c,"f")[t(this,r,"f")],l(this,r,t(this,r,"f")+1)}t(this,r,"f")===t(this,h,"f")&&this.cleanupCallback()}else t(this,c,"f")[n]=_})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(e){l(this,a,e)}get onmessage(){return t(this,a,"f")}[(a=new WeakMap,r=new WeakMap,c=new WeakMap,h=new WeakMap,d)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[d]()}}class f{constructor(e,i,n){this.plugin=e,this.event=i,this.channelId=n}async unregister(){return o(`plugin:${this.plugin}|remove_listener`,{event:this.event,channelId:this.channelId})}}async function m(s,e,i){const n=new g(i);try{return o(`plugin:${s}|register_listener`,{event:e,handler:n}).then(()=>new f(s,e,n.id))}catch{return o(`plugin:${s}|registerListener`,{event:e,handler:n}).then(()=>new f(s,e,n.id))}}async function I(s){return o(`plugin:${s}|check_permissions`)}async function C(s){return o(`plugin:${s}|request_permissions`)}async function o(s,e={},i){return window.__TAURI_INTERNALS__.invoke(s,e,i)}function T(s,e="asset"){return window.__TAURI_INTERNALS__.convertFileSrc(s,e)}class b{get rid(){return t(this,u,"f")}constructor(e){u.set(this,void 0),l(this,u,e)}async close(){return o("plugin:resources|close",{rid:this.rid})}}u=new WeakMap;function k(){return!!(globalThis||window).isTauri}const E=Object.freeze(Object.defineProperty({__proto__:null,Channel:g,PluginListener:f,Resource:b,SERIALIZE_TO_IPC_FN:d,addPluginListener:m,checkPermissions:I,convertFileSrc:T,invoke:o,isTauri:k,requestPermissions:C,transformCallback:p},Symbol.toStringTag,{value:"Module"}));export{g as C,b as R,d as S,t as _,m as a,l as b,E as c,o as i,p as t};
